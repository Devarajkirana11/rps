<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">

<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
<script src="/js/booking-details.js"></script>

{{> nav this}} 

{{> header}}

<!-- Begin Page Content -->
<main id="page-content">
	<div class="row row-xl page-title">
		<div class="col-md-12">
			<h3 class="text-black fw-semi-thk">Booking Details</h3>
		</div>
	</div>
	<div class="page-container">
		<div class="row row-xl">

			<div class="col-md-12 m-lg-b">
				<h4 class="text-black fw-semi-thk fs-20">Booking Information</h4>
				<div class="col-md-2" style="float:right;font-size:24px;">
				{{#notequal output.booking.status 'ON_HOLD'}}
					<span class="" style="float:left;width:25%;"><a target="_blank" href="/pms/pdf-generation?booking_uuid={{ output.booking.uuid }}"><i class="fa fa-file-pdf-o"></i></a></span>
				{{/notequal}}
				<span data-toggle="modal" data-target="#send-email" class="text-align-right" style="float:left;width:25%;"><i class="fa fa-envelope-o" aria-hidden="true"></i></span>
				</div>
				<div id="send-email" class="modal fade modal-top" role="dialog">
					<div class="modal-dialog modal-sm">
						<div class="modal-content-container">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal">&times;</button>
									<h5 class="text-uppercase fw-semi-thk text-black m-n">Email Invoice</h5>
								</div>
								<div class="modal-body p-xl-t">
									<form action="/payment-manager/booking/email-trigger" method="POST" id="send-email-form">
										<input type="text" value="{{ output.booking.guest.emailAddress }}" name="email" id="user-email" class="form-control">
										<input type="hidden" name="hotel_id" id="hotel_id" value="{{ output.roomReservations.[0].hotelUuid }}">
										<input type="hidden" name="booking_uuid" value="{{ output.booking.uuid }}" id="booking_uuid">
										<button type="submit" value="Submit" class="btn btn-danger btn-block btn-rounded m-lg-t">Send Email</button>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<input type="hidden" id="bookinguuid" disabled="disabled" name="bookinguuid" value="{{ output.booking.uuid }}" class="form-control">
			<input type="hidden" name="logged_in_id" id="logged_in_id" value="{{ user_uuid }}">

			<div class="col-md-12">
				<div class="row row-xl m-md-b">
					<div class="col-md-3">
						<p><small class="text-uppercase">Booking ID</small></p>
						<p class="fs-md fw-semi-thk text-black text-uppercase">{{ output.booking.referenceId }}</p>
					</div>
					<div class="col-md-3">
						<p><small class="text-uppercase">Booking Date & Created by</small></p>
						<p class="fs-md fw-semi-thk text-black text-uppercase">{{ created_by }} {{#countrycustomDateFormatwithTime output.booking.bookedOn country_name }}{{/countrycustomDateFormatwithTime}}</p>
					</div>
					<div class="col-md-3">
						<p><small class="text-uppercase">Booking Status</small></p>
						<p class="fs-md fw-semi-thk text-success text-uppercase">{{ output.booking.status }}</p>
					</div>
					<div class="col-md-3">
						<p><small class="text-uppercase">Number of Rooms</small></p>
						<p class="fs-md fw-semi-thk text-black text-uppercase">{{#count output.booking.roomReservations }}{{/count}}</p>
					</div>
				</div>
			</div>

			<div class="col-md-12">
				<div class="row row-xl m-md-b">
					<div class="col-md-3">
						<p><small class="text-uppercase">Check In</small></p>
						<p class="fs-md fw-semi-thk text-danger text-uppercase">{{#customDateFormat output.roomReservations.[0].checkIn }}{{/customDateFormat}}</p>
					</div>

					<div class="col-md-3">
						<p><small class="text-uppercase">Check Out</small></p>
						<p class="fs-md fw-semi-thk text-danger text-uppercase">{{#customDateFormat output.roomReservations.[0].checkOut }}{{/customDateFormat}}</p>
					</div>

					<div class="col-md-3">
						<p><small class="text-uppercase">Adult(s)</small></p>
						<p class="fs-md fw-semi-thk text-black text-uppercase">{{ output.roomReservations.[0].numberOfGuests }}</p>
					</div>

					{{#if output.booking.noofchild }}
						<div class="col-md-3">
							<p><small class="text-uppercase">Child</small></p>
							<p class="fs-md fw-semi-thk text-black text-uppercase">{{ output.booking.noofchild }}</p>
						</div>
					{{/if}}

					{{#notequal output.booking.status 'ON_HOLD'}}
					
						{{#if check_in_details }}
							<div class="col-md-3">
								<p><small class="text-uppercase">Check in Details</small></p>
								<p class="fs-md fw-semi-thk text-black text-uppercase">{{ check_in_details }}</p>
							</div>
						{{/if}}
					
						{{#if check_out_details }}
							<div class="col-md-3">
								<p><small class="text-uppercase">Check out Details</small></p>
								<p class="fs-md fw-semi-thk text-black text-uppercase">{{ check_out_details }}</p>
							</div>
						{{/if}}

					{{/notequal}}

					<div class="col-md-3">
						<p><small class="text-uppercase">Booking Source</small></p>
						<p class="fs-md fw-semi-thk text-black text-uppercase">{{ output.booking.source }}</p>
					</div>

					{{#if paymentData.channel_name }}
						<div class="col-md-3">
							<p><small class="text-uppercase">Channel Name</small></p>
							<p class="fs-md fw-semi-thk text-black text-uppercase">{{ paymentData.channel_name }}</p>
						</div>
						<div class="col-md-3">
							<p><small class="text-uppercase">Reference ID</small></p>
							<p class="fs-md fw-semi-thk text-black text-uppercase">{{ paymentData.paymentReferrenceId }}</p>
						</div>
					{{/if}}
				</div>
			</div>

			<input type="hidden" id="check_in" value="{{#customDateFormat output.roomReservations.[0].checkIn }}{{/customDateFormat}}"
			 name="check_in">
			<input type="hidden" id="check_out" value="{{#customDateFormat output.roomReservations.[0].checkOut }}{{/customDateFormat}}"
			 name="check_out"> 
			 
			 {{#each output.roomReservations }}



				<div class="row row-xl">
					<div class="col-md-3">
						<p><small class="text-uppercase">Room Type</small></p>
						<p class="fs-md fw-semi-thk text-black text-uppercase room-type-detail">{{#getRoomTypeName this.roomType }}{{/getRoomTypeName}}</p>
						<input type="hidden" data-count="{{@index}}" data-room-number="{{ this.roomNumber }}" value="{{ this.roomType }}" class="room-type-value"
						name="room_type" id="room_type">
					</div>
					<div class="col-md-3">
						<p><small class="text-uppercase">Room Number</small></p>
						<p class="fs-md fw-semi-thk text-black text-uppercase get-room-number">{{ this.roomNumber }}</p>
						<input type="hidden" name="get_room_number" value="{{ this.roomNumber }}" id="get-room-number">
						<a href="javascript:void(0)" data-toggle="modal" data-target="#roomnumberedit{{@index}}" class="btn btn-danger btn-rounded w-150 text-left roomnumbereedit">Edit <i class="fa fa-edit fa-fw pull-right"></i></a>
					</div>
				</div>

				<div id="roomnumberedit{{@index}}" class="modal fade modal-top" role="dialog">
					<div class="modal-dialog modal-sm">
						<div class="modal-content-container">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal">&times;</button>
									<h5 class="text-uppercase fw-semi-thk text-black m-n">Edit Room Number</h5>
								</div>
								<div class="modal-body p-xl-t">
									<form action="/pms/room-number-change" method="POST" id="room-edit-form">
										
										<div class="row row-xl">
											<div class="col-md-12">
												<div class="form-group">
													<label>No of Guest</label>
													<input type="text" data-count="{{@index}}" data-room-number="{{ this.numberOfGuests }}" value="{{ this.numberOfGuests }}" class="form-control noofguest-value"
													name="no_of_guest">
												</div>
											</div>

										</div>
										
										<div id="room_details{{@index}}">
										</div>
										<input type="hidden" name="_METHOD" value="PUT" />
										<input type="hidden" name="hotel_id" id="hotel_id" value="{{ this.hotelUuid }}">
										<input type="hidden" name="room_reservation_uuid" value="{{ this.uuid }}" id="reservation_uuid">
										<input type="hidden" name="booking_uuid" value="{{ this.bookingUuid }}" id="booking_uuid">
										<button type="submit" value="Submit" class="btn btn-danger btn-block btn-rounded m-lg-t">Save</button>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
				<input type="hidden" name="hotel_id" value="{{ this.hotelUuid }}" id="hotel_id"> 
			
			{{/each}}

		</div>

		<hr class="m-xl-t m-xl-b">

		<div class="guest-information">
			<div class="row row-xl m-md-b">

				<div class="col-md-12 m-lg-b">
					<h4 class="text-black fw-semi-thk fs-20">Guest Information</h4>
				</div>

				<div class="col-md-3">
					<p><small class="text-uppercase">First Name *</small></p>
					<p class="fs-md fw-semi-thk text-black text-uppercase">{{ output.booking.guest.firstName }}</p>
				</div>

				<div class="col-md-3">
					<p><small class="text-uppercase">Last Name *</small></p>
					<p class="fs-md fw-semi-thk text-black text-uppercase">{{ output.booking.guest.lastName }}</p>
				</div>

				<div class="col-md-3">
					<p><small class="text-uppercase">Email *</small></p>
					<p class="fs-md fw-semi-thk text-black">{{ output.booking.guest.emailAddress }}</p>
				</div>
				
				<input type="hidden" id="guest_first_name" value="{{ output.booking.guest.firstName }}">
				<input type="hidden" id="guest_last_name" value="{{ output.booking.guest.lastName }}">
				<input type="hidden" id="guest_email_address" value="{{ output.booking.guest.emailAddress }}">
				
				<div class="col-md-3">
					<p><small class="text-uppercase">Mobile Number *</small></p>
					<p class="fs-md fw-semi-thk text-black text-uppercase">{{ output.booking.guest.phoneNumber }}</p>
				</div>

				{{#if identification_type }}
					<div class="col-md-3">
						<p><small class="text-uppercase">Identification Type</small></p>
						<p class="fs-md fw-semi-thk text-black text-uppercase">{{ identification_type }}</p>
					</div>
				{{/if}}

				{{#if identification_type }}
					<div class="col-md-3">
						<p><small class="text-uppercase">Number</small></p>
						<p class="fs-md fw-semi-thk text-black text-uppercase">{{ ic_number }}</p>
					</div>
				{{/if}}

				{{#if identification_doc_url }}
					<div class="col-md-3">
						<p><small class="text-uppercase">Identification Doc *</small></p>
						<p class="fs-md fw-semi-thk text-black"><a href="{{ identification_doc_url }}" target="_blank" class="btn btn-success">Click here to View</a></p>
					</div>
				{{/if}}

				{{#if guest_details._company_name }}
					<div class="col-md-3">
						<p><small class="text-uppercase">Company Name</small></p>
						<p class="fs-md fw-semi-thk text-black text-uppercase">{{ guest_details._company_name }}</p>
					</div>
				{{/if}}

				{{#if guest_details._company_address }}
					<div class="col-md-3">
						<p><small class="text-uppercase">Company Address</small></p>
						<p class="fs-md fw-semi-thk text-black text-uppercase">{{ guest_details._company_address }}</p>
					</div>
				{{/if}}

				{{#if guest_details._company_taxid }}
					<div class="col-md-3">
						<p><small class="text-uppercase">Tax ID</small></p>
						<p class="fs-md fw-semi-thk text-black text-uppercase">{{ guest_details._company_taxid }}</p>
					</div>
				{{/if}}

				{{#if guest_details._company_telephone }}
					<div class="col-md-3">
						<p><small class="text-uppercase">Telephone</small></p>
						<p class="fs-md fw-semi-thk text-black text-uppercase">{{ guest_details._company_telephone }}</p>
					</div>
				{{/if}}

				{{#if guest_details._company_fax }}
					<div class="col-md-3">
						<p><small class="text-uppercase">Company Fax</small></p>
						<p class="fs-md fw-semi-thk text-black text-uppercase">{{ guest_details._company_fax }}</p>
					</div>
				{{/if}}

				{{#if guest_details._reason_to_stay }}
					<div class="col-md-3">
						<p><small class="text-uppercase">Guest Remarks</small></p>
						<p class="fs-md fw-semi-thk text-black text-uppercase">{{ guest_details._reason_to_stay }}</p>
					</div>
				{{/if}}

				<div class="col-md-12">
					<a href="javascript:void(0)" data-toggle="modal" data-target="#guest-info-edit" class="btn btn-danger btn-rounded w-150 text-left guest-info-edit">Edit <i class="fa fa-edit fa-fw pull-right"></i></a>
				</div>

				<div id="guest-info-edit" class="modal fade modal-top" role="dialog">
					<div class="modal-dialog">
						<div class="modal-content-container">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal">&times;</button>
									<h5 class="text-uppercase fw-semi-thk text-black m-n">Edit Guest Details</h5>
								</div>
								<div class="modal-body" style="height:800px;overflow-y:auto;">
									<div class="selectWrapper">
									<form action="/pms-manager/guest/info/edit" method="POST" id="guest-edit-form">
										<div class="form-group">
										<div class="col-md-6">
											<label>First Name</label>
											<input type="text" value="{{ output.booking.guest.firstName }}" name="first_name" id="first_name" class="form-control">
										</div>
										<div class="col-md-6">
											<label>Last Name</label>
											<input type="text" value="{{ output.booking.guest.lastName }}" name="last_name" id="last_name" class="form-control">
										</div>
										</div>
										<div class="form-group">
										<div class="col-md-6">
											<label>Email</label>
											<input type="text" value="{{ output.booking.guest.emailAddress }}" name="email" id="email" class="form-control">
										</div>
										<div class="col-md-6">
											<label>Mobile Number</label>
											<input type="text" value="{{ output.booking.guest.phoneNumber }}" name="mobile_number" id="mobile_number" class="form-control">
										</div>
										</div>
										<div class="form-group">
											<div class="m-lg-b">
												<label class="" for="icno">Identification type *</label>
											</div>

											<div class="radio-inline">
												<div class="radio-default danger">
													<input type="radio" id="passport" name="identification_type" value="PASSPORT" {{#equal identification_type 'PASSPORT'}} checked="checked"
													 {{/equal}}>
													<label for="passport">Passport</label>
												</div>
											</div>

											<div class="radio-inline">
												<div class="radio-default danger">
													<input id="ic_number" type="radio" name="identification_type" value="IC_NUMBER" {{#equal identification_type 'IC_NUMBER'}}
													 checked="checked" {{/equal}}>
													<label for="ic_number">IC Number</label>
												</div>
											</div>	
										</div>
										<div class="col-md-12">
											{{guest_details.additional_identification}}
											<div class="checkbox">
												<input type="checkbox" {{#equal guest_details._additional_identification 'on' }} checked="checked" {{/equal}} name="additional_identification" id="additional_identification">
												<label for="additional_identification">Employment Pass / Student Pass / Dependent Visa </label>
											</div>
										</div>
										<div class="col-md-12">
											<div class="additional-identification-block">
												<label>ID : </label>
												<input type="textbox" class="form-control" value="{{ guest_details._additional_identification_number }}" name="additional_identification_number" id="additional_identification_number">
											</div>
										</div>
										<div class="form-group">
											<div class="col-md-6">
												<label>Passport / IC Number</label>
												<input type="text" value="{{ ic_number }}" name="ic_number" id="ic_number" class="form-control">
											</div>
											<div class="col-md-6">
												<label class="" for="guest_nationality">Nationality *</label>
												<div class="select-wrapper">
													<select id="nationality" name="guest_nationality" class="form-control">
														<option value="">Select</option>
														{{#each country}}
														<option value="{{ this.name }}" {{#equal ../guest_details._nationality this.name }} selected="selected" {{/equal}}>{{this.name }}</option>
														{{/each}}
													</select>
												</div>	
											</div>
										</div>

										<div class="form-group">
											<div class="row row-sm">
												<div class="col-md-12">
													<label class="" for="guest_nationality">File Upload</label>
													<div class="file-uploader-new-room">
													<input type="file" id="ic_doc" multiple name="ic_doc" placeholder="" class="saveFile form-control" value="{{#if guest_details.ic_doc }}{{ guest_details.ic_doc }}{{/if}}"/>
													<span class="text-danger">{{#if ic_doc }}{{ic_doc }} {{/if}}</span>
													</div>
												</div>
												{{#if identification_doc_url }}
													<div class="col-md-3">
													<p class="fs-md fw-semi-thk text-black"><a href="{{ identification_doc_url }}" target="_blank" class="btn btn-success">Download</a></p>
													</div>
												{{/if}}		
											</div>
										</div>		

										<div class="form-group">
                                                <div class="row row-sm">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                        <label class="" for="address">Address</label>
                                                        <input type="text" id="address" value="{{ guest_details._address }}" name="guest_address" placeholder="" class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                        <label class="" for="address2">Address 2</label>
                                                        <input type="text" id="address2" value="{{ guest_details._address2 }}" name="guest_address_2" placeholder="" class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="">Country</label>
                                                            <div class="select-wrapper">
                                                                <select id="country" name="country" class="country form-control">
                                                                    <option value="select" {{#equal inputs.country 'select'}} selected="selected" {{/equal}}>Country</option>
                                                                    {{#if locationmasters }}
                                                                    {{#each locationmasters }}
                                                                    <option value="{{@key}}"  {{#equal ../guest_details._country @key}} selected="selected" {{/equal}}>{{ this.name }}</option>
                                                                    {{/each}}
                                                                    {{/if}}
                                                                </select>
                                                            </div>	
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="">State</label>
                                                            <div class="select-wrapper">
                                                                <select id="state"  name="state" placeholder="" class="state form-control">
                                                                    <option value="select" {{#equal inputs.guest_state 'select'}} selected="selected" {{/equal}}>State</option>
                                                                    {{#if locationmasters }}
                                                                    {{#each locationmasters }}
                                                                    {{#each this.states}}
                                                                    <option value="{{@key}}"  {{#equal ../../guest_details._state @key}} selected="selected" {{/equal}}>{{ this.name }}</option>
                                                                    {{/each}}
                                                                    {{/each}}
                                                                    {{/if}}
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="">City</label>
                                                            <div class="select-wrapper">
                                                                <select id="city" name="city" placeholder="" class="city form-control">
                                                                    <option value="select" {{#equal inputs.guest_city 'select'}} selected="selected" {{/equal}}>City</option>
                                                                    {{#if locationmasters }}
                                                                    {{#each locationmasters }}
                                                                    {{#each this.states}}
                                                                    {{#each this.cities}}
                                                                    <option value="{{@key}}" {{#equal ../../../guest_details._city @key}} selected="selected" {{/equal}}>{{ this.name }}</option>
                                                                    {{/each}}	
                                                                    {{/each}}
                                                                    {{/each}}
                                                                    {{/if}}
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label class="" for="lastname">Postal Code</label>
                                                            <input type="text" id="postal_code" value="{{ guest_details._postal_code }}" name="guest_postal_code" placeholder="" class="form-control">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row row-sm">
                                                    <div class="col-md-12 m-lg-b">
                                                        <div class="form-group">
                                                            <label for="">Gender</label>
                                                        </div>
                                                        <div class="radio-inline">
                                                            <div class="radio-default danger">
                                                                <input type="radio" id="checkout-gender-male" name="guest_gender" value="Male" {{#equal guest_details._gender 'Male'}} checked="checked" {{/equal}}>
                                                                <label for="checkout-gender-male">Male</label>
                                                            </div>
                                                        </div>
                                                        <div class="radio-inline">
                                                            <div class="radio-default danger">
                                                                <input id="checkout-gender-female" type="radio" name="guest_gender" value="Female" {{#equal guest_details._gender 'Female'}} checked="checked" {{/equal}}>
                                                                <label for="checkout-gender-female">Female</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row row-sm">
                                                    <div class="col-md-12">
                                                        <div class="checkbox">
                                                            <input type="checkbox" {{#equal guest_details._company_information 'on'}} checked="checked" {{/equal}} name="add_company_details" id="add-company-details">
                                                            <label for="add-company-details"> Add Guest Company Information </label>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="company-information-block">
                                                    <div class="row row-sm">
                                                        <div class="form-group">
                                                            <label class="" for="company_name">Company Name</label>
                                                            <input type="text" id="company_name" value="{{ guest_details._company_name }}" name="company_name" placeholder="" class="form-control">
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="" for="company_address">Company Address</label>
                                                            <input type="text" id="company_address" value="{{ guest_details._company_address }}" name="company_address" placeholder="" class="form-control">
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="" for="company_taxid">Tax ID</label>
                                                            <input type="text" id="company_taxid" value="{{ guest_details._company_taxid }}" name="company_taxid" placeholder="" class="form-control">
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="" for="company_telephone">Tel</label>
                                                            <input type="text" id="company_telephone" value="{{ guest_details._company_telephone }}" name="company_telephone" placeholder="" class="form-control">
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="" for="company_fax">Fax</label>
                                                            <input type="text" id="company_fax" value="{{ guest_details._company_fax }}" name="company_fax" placeholder="" class="form-control">
                                                        </div>
                                                    </div>
                                                </div>

		                                        <div class="row row-sm">
                                                    <div class="col-md-12">
                                                        <div class="form-group">
                                                            <label>Remarks</label>
                                                            <textarea class="form-control" rows="5" cols="100" name="guest_remarks" placeholder="Enter text here...">{{ guest_details._reason_to_stay }}</textarea>
                                                        </div>
                                                    </div>
                                                </div>
										</div>
										<input type="hidden" name="hotel_id" id="hotel_id" value="{{ hotel_id }}">
										<input type="hidden" value="{{ output.booking.source }}" id="booking_source" name="booking_source">
										<input type="hidden" name="room_reservation_uuid" value="{{ this.uuid }}" id="reservation_uuid">
										<input type="hidden" name="payment_type" value="{{ paymentData.paymentType }}">
										<input type="hidden" name="payment_status" value="{{ paymentData.paymentStatus }}">
										<input type="hidden" name="tourism_tax" value="{{ paymentData.tourismTax }}"> 
										<input type="hidden" name="totalAmount" value="{{ paymentData.totalAmount }}"> 
										<input type="hidden" name="no_of_rooms" value="{{#count output.booking.roomReservations }}{{/count}}"> 
										<input type="hidden" name="no_of_nights" value="{{ output.roomReservations.[0].numberOfNights }}"> 
										<input type="hidden" name="totalAmountPaid" value="{{ paymentData.totalAmountPaid }}"> 
										<input type="hidden" name="booking_uuid" value="{{ output.booking.uuid }}" id="booking_uuid">
										<button type="submit" value="Submit" class="btn btn-danger btn-block btn-rounded m-lg-t">Save</button>
									</form>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		{{#if paymentData }}

		<hr class="m-xl-t m-xl-b">
		<div class="checkout-information">
			<div class="row row-xl m-md-b">
				<div class="col-md-12 m-lg-b">
					<h4 class="text-black fw-semi-thk fs-20">Payment Information</h4>
				</div>
				<div class="col-md-6">
					<div class="row row-xs">
						<div class="col-xs-6">
							<p>Booking Currency</p>
						</div>
						<div class="col-xs-6">
							<p><strong>
								{{#if paymentData.paymentCurrency }}
									{{ paymentData.paymentCurrency }}
								{{ else }}
									MYR
								{{/if}}
							</strong></p>
						</div>
					</div>
					<div class="row row-xs">
						<div class="col-xs-6">
							<p>Total Room Price</p>
						</div>
						<div class="col-xs-6">
							<p><strong>{{#round paymentData.totalRoomPrice }}{{/round}}</strong></p>
						</div>
					</div>

					{{#if paymentData.discountAmount }}

					<div class="row row-xs">
						<div class="col-xs-6">
							<p>Discount</p>
						</div>
						<div class="col-xs-6">
							<p><strong>{{#round paymentData.discountAmount }}{{/round}}</strong></p>
						</div>
					</div>

					<div class="row row-xs">
						<div class="col-xs-6">
							<p>Price AfterDiscount</p>
						</div>

						<div class="col-xs-6">
							<p><strong>{{#round paymentData.priceAfterDiscount }}{{/round}}</strong></p>
						</div>
					</div>

					{{/if}} 

					{{#if paymentData.transactionReferrenceId }}

					<div class="row row-xs">
						<div class="col-xs-6">
							<p>Payment Transaction ID</p>
						</div>
						<div class="col-xs-6">
							<p><strong>{{ paymentData.transactionReferrenceId }}</strong></p>
						</div>
					</div>

					{{/if}}

					<div class="row row-xs">
						<div class="col-xs-6">
							<p>Service Fee</p>
						</div>
						<div class="col-xs-6">
							<p><strong>{{#round paymentData.serviceFee }}{{/round}}</strong></p>
						</div>
					</div>
					<div class="row row-xs">
						<div class="col-xs-6">
							<p>GST / VAT</p>
						</div>
						<div class="col-xs-6">
							<p><strong>{{#round paymentData.tax }}{{/round}}</strong></p>
						</div>
					</div>

					{{#if paymentData.tourismTax }}

					<div class="row row-xs">
						<div class="col-xs-6">
							<p>Tourism Tax</p>
						</div>
						<div class="col-xs-6">
							<p><strong>{{#round paymentData.tourismTax }}{{/round}}</strong></p>
						</div>
					</div>

					{{/if}}

					{{#notequal paymentData.paymentStatus 'ON_HOLD' }}

						<div class="row row-xs">
							<div class="col-xs-6">
								<p>Total Amount Paid</p>
							</div>
							<div class="col-xs-6">
								<p><strong>{{#round paymentData.totalAmountPaid }}{{/round}}</strong></p>
							</div>
						</div>

					{{/notequal}}

					<div class="row row-xs">
						<div class="col-xs-6">
							<p>Total Amount</p>
						</div>
						<div class="col-xs-6">
							<p><strong>{{#round paymentData.totalAmount }}{{/round}}</strong></p>
						</div>
					</div>

					{{#notequal paymentData.paymentStatus 'ON_HOLD' }}
						<div class="row row-xs">
							<div class="col-xs-6">
								<p>Payment Type</p>
							</div>
							<div class="col-xs-6">
								<p><strong>{{ paymentData.paymentType }}</strong></p>
							</div>
						</div>
					{{/notequal}}

					<div class="row row-xs">
						<div class="col-xs-6">
							<p>Payment Status</p>
						</div>
						<div class="col-xs-6">
							<p><strong>{{ paymentData.paymentStatus }}</strong></p>
						</div>
					</div>

					{{#if depositData.depositCollected }}
				
						<div class="row row-xs">
							<div class="col-xs-6">
								<p>Deposit Amount</p>
							</div>
							<div class="col-xs-6">
								<p>
									<strong>
											{{#if depositData.depositCollected }}
											{{ depositData.depositCollected }}
											{{ else }}
											0
											{{/if}} 
									</strong>
								</p>
							</div>
						</div>
				
					{{/if}} 
					 {{#equal output.booking.status 'VACATED'}}
		
						{{#if depositData.lossDamageFee }}
						
							<div class="row row-xs">
								<div class="col-xs-6">
									<p>Loss & Damage Fee</p>
								</div>
								<div class="col-xs-6">
									<p><strong>{{ depositData.lossDamageFee }}</strong></p>
								</div>
							</div>
						
						{{/if}}

						{{#if depositData.depositRefunded }}

							<div class="row row-xs">
								<div class="col-xs-6">
									<p>Deposit Refunded</p>
								</div>
								<div class="col-xs-6">
									<p><strong>{{ depositData.depositRefunded }}</strong></p>
								</div>
							</div>
						
						{{/if}}

					{{/equal}}
				</div>
			</div>
		</div>

		{{/if}}

		<hr class="m-xl-t m-xl-b">

		<div class="row row-xl m-xl-t">
			<div class="col-md-12">
				<div class="action-button">

					{{#equal output.booking.status 'ON_HOLD' }}
						<form action="/payment-manager/pay-at-hotel" method="POST" id="cash-collect-form">
							<input type="hidden" value="{{ output.roomReservations.[0].hotelUuid }}" id="hoteluuid" name="hotel_id">
							<input type="hidden" value="{{ output.booking.referenceId }}" id="booking_referenceId" name="booking_referenceId">
							<input type="hidden" value="{{ paymentData.totalAmount }}" id="total_amount" name="total_amount">
							<input type="hidden" value="{{ output.booking.uuid }}" id="booking_uuid" name="booking_uuid">
							<input type="hidden" value="{{ output.booking.source }}" id="booking_sources" name="booking_source">
							<input type="hidden" value="{{ paymentData.paymentCurrency }}" id="paymentCurrency" name="paymentCurrency">
							<input type="hidden" value="{{ paymentData.tourismTax }}" id="tourismTax" name="tourismTax">
							<input type="hidden" value="{{ depositData.depositAmount }}" id="pay-deposit-amount" name="pay_deposit_amount">
							<input type="hidden" value="{{#customDateFormat output.roomReservations.[0].checkIn }}{{/customDateFormat}}" id="booking-check-in" name="check_in">
							{{#equal output.booking.source 'OTA' }}
								<div class="paid-ota-button">
									<div class="row row-sm m-md-b m-md-t">
										<div class="col-md-12">
											<input type="checkbox" name="paid_in_ota" id="paid-in-ota">
											<label for="paid-in-ota">Paid in OTA</label>
										</div>
									</div>
								</div>
							{{/equal}}
							<div class="row row-sm m-md-b">
								<div class="col-md-12">
									<p><small class="text-uppercase fs-xs text-grey m-n">Deposit Collected</small></p>
									<div class="radio-inline p-n">
										<div class="radio-default danger">
											<input type="radio" class="deposit" id="deposit-yes" name="deposit" value="YES" {{#equal inputs.deposit 'Yes'}} checked="checked"
											{{/equal}}>
											<label for="deposit-yes">Yes</label>
										</div>
									</div>
									<div class="radio-inline p-n">
										<div class="radio-default danger">
											<input type="radio" class="deposit" id="deposit-no" name="deposit" value="NO" {{#equal inputs.deposit 'No'}} checked="checked"
											{{/equal}}>
											<label for="deposit-no">No</label>
										</div>
									</div>
								</div>
							</div>
							<div class="row row-sm m-md-b m-md-t">
								<div class="col-md-12">
									<div class="col-md-6"><label>Total Amount</label></div>
									<div class="col-md-6"><input type="textbox" disabled="disabled" id="net_total_amount" name="net_total_amount" value="{{ paymentData.totalAmount }}" class="form-control"></div>
								</div>
							</div>
							<div class="row row-sm m-md-b">
								<div class="col-md-12">
									<div class="col-md-6">
										<label>Amount Paid</label>
									</div>
									<div class="col-md-6">
										<input type="text" disabled="disabled" value="0" id="amount_paid" name="amount_paid" class="form-control">
									</div>
								</div>
							</div>
							<div class="row row-sm m-md-b">
								<div class="col-md-12">
									<div class="col-md-6">
										<label>Amount to be Collected</label>
									</div>
									<div class="col-md-6">
										<input type="text" readonly="true" value="{{ paymentData.totalAmount }}" id="amount_to_be_collected" name="amount_to_be_collected" class="form-control">
									</div>
								</div>
							</div>
							<div class="row row-sm m-md-b">
								<div class="col-md-12">
									<p><small class="text-uppercase fs-xs text-grey m-n">Payment Type</small></p>
									<div class="radio-inline p-n">
										<div class="radio-default danger">
											<input id="payment-cash" class="payment_type" type="radio" name="payment_type" value="CASH" {{#equal inputs.payment_type 'CASH'}} checked="checked" {{/equal}}>
											<label for="payment-cash">Cash</label>
										</div>
									</div>
									<div class="radio-inline p-n">
										<div class="radio-default danger">
											<input id="payment-card" class="payment_type" type="radio" name="payment_type" value="CREDIT_CARD" {{#equal inputs.payment_type 'CREDIT_CARD'}} checked="checked" {{/equal}}>
											<label for="payment-card">Credit Card</label>
										</div>
									</div>
									<div class="radio-inline p-n">
										<div class="radio-default danger">
											<input id="payment-pos" class="payment_type" type="radio" name="payment_type" value="POS" {{#equal inputs.payment_type 'POS'}} checked="checked" {{/equal}}>
											<label for="payment-pos">POS</label>
										</div>
									</div>
									<div class="radio-inline p-n">
										<div class="radio-default danger">
											<input id="bank-transfer" class="payment_type" type="radio" name="payment_type" value="BANK_TRANSFER" {{#equal inputs.payment_type 'BANK_TRANSFER'}} checked="checked" {{/equal}}>
											<label for="bank-transfer">Bank Transfer</label>
										</div>
									</div>
									<div class="radio-inline p-n">
										<div class="radio-default danger">
											<input id="city-ledger" class="payment_type" type="radio" name="payment_type" value="CITY_LEDGER" {{#equal inputs.payment_type 'CITY_LEDGER'}} checked="checked" {{/equal}}>
											<label for="city-ledger">City Ledger</label>
										</div>
									</div>
									<div class="row row-sm m-md-t m-md-b transaction_referrence_id">
										<div class="col-md-12">
											<label>Transaction Referrence ID*</label>
											<input type="text" class="form-control" name="transaction_referrence_id" id="transaction_referrence_id" value="{{ inputs.transaction_referrence_id }}">
										</div>
									</div>
								</div>
							</div>
							<div class="row row-sm m-md-b">
								<div class="col-md-12">
									<button type="submit" id="cash-collect-button-submit" value="Submit" class="collect-now-button btn btn-danger w-150 btn-rounded">Collect Now</button>
									<span data-booking-uuid="{{ output.booking.uuid }}" class="check-in-now-button btn btn-danger w-150 btn-rounded" id="check-in-button">Next</span>
									<span data-bookingUuid="{{ output.booking.uuid }}" id="NO_SHOW" class="btn btn-danger btn-rounded w-150 no-show">No Show</span>			
									{{#notequal output.booking.status 'CANCELLED'}}
										<span id="{{ output.booking.uuid }}" class="btn btn-danger w-150 booking-cancel btn-rounded">Cancel</span> 
									{{/notequal}} 
								</div>
							</div>
						</form>
					{{/equal}} 

					{{#equal output.booking.status 'CONFIRMED'}}
					<form action="/payment-manager/booking-confirm-action" method="POST" id="confirm-action-form">
					<input type="hidden" value="{{ output.roomReservations.[0].hotelUuid }}" name="hotel_id">
					<input type="hidden" value="{{ paymentData.totalAmount }}" id="total_amount" name="total_amount">
					<input type="hidden" value="{{ output.booking.referenceId }}" id="booking_referenceId" name="booking_referenceId">
					<input type="hidden" value="{{ output.booking.uuid }}" id="booking_uuid" name="booking_uuid">
					<input type="hidden" value="{{ paymentData.paymentCurrency }}" id="paymentCurrency" name="paymentCurrency">
					<input type="hidden" value="{{ paymentData.tourismTax }}" id="tourismTax" name="tourismTax">
					<input type="hidden" value="{{ depositData.depositAmount }}" id="pay-deposit-amount" name="pay_deposit_amount">
					<input type="hidden" value="{{#customDateFormat output.roomReservations.[0].checkIn }}{{/customDateFormat}}" id="booking-check-in" name="check_in">
						{{#equal depositData.depositCollected 0 }}
						<div class="row row-sm m-md-b">
						<div class="col-md-12">
							<p><small class="text-uppercase fs-xs text-grey m-n">Deposit Collected</small></p>
							<div class="radio-inline p-n">
								<div class="radio-default danger">
									<input type="radio" class="deposit" id="deposit-yes" name="deposit" value="YES" {{#equal inputs.deposit 'Yes'}} checked="checked"
									{{/equal}}>
									<label for="deposit-yes">Yes</label>
								</div>
							</div>
							<div class="radio-inline p-n">
								<div class="radio-default danger">
									<input type="radio" class="deposit" id="deposit-no" name="deposit" value="NO" {{#equal inputs.deposit 'No'}} checked="checked"
									{{/equal}}>
									<label for="deposit-no">No</label>
								</div>
							</div>
						</div>
						</div>
						{{/equal}}

						{{#equal paymentData.tourismtaxDetails.[0].paymentStatus 'ON_HOLD' }}
							<input type="hidden" name="tourismtax_to_be_collected" id="tourismtax_to_be_collected" value="{{ paymentData.tourismtaxDetails.[0].Amount }}" >
						{{/equal}}

						<div class="row row-sm m-md-b">
							<div class="col-md-12">
							<div class="col-md-6">
							<label>Amount to be Collected</label>
							</div>
							<div class="col-md-6">
							<input type="text" readonly="true" value="0" id="amount_to_be_collected" name="amount_to_be_collected" class="form-control">
							</div>
							</div>
						</div>
						<div class="col-md-12">
							<p><small class="text-uppercase fs-xs text-grey m-n">Payment type</small></p>
							<select name="payment_type" id="payment_type" class="form-control">
								<option value="">Select</option>
								<option value="CASH" {{#equal inputs.payment_type 'CASH'}} selected="selected" {{/equal}}>CASH</option>
								<option value="POS"  {{#equal inputs.payment_type 'POS'}} selected="selected" {{/equal}}>POS</option>
								<option value="BANK_TRANSFER"  {{#equal inputs.payment_type 'BANK_TRANSFER'}} selected="selected" {{/equal}}>BANK TRANSFER</option>
							</select>
						</div>
						<div class="row row-sm m-md-t m-md-b transaction_referrence_id">
							<div class="col-md-12">
								<label>Transaction Referrence ID</label>
								<input type="text" class="form-control" name="transaction_referrence_id" id="transaction_referrence_id" value="{{ inputs.transaction_referrence_id }}">
							</div>
						</div>
						<div class="col-md-12"><br/><br/></div>

						<div class="row row-sm m-md-b">
							<div class="col-md-12">
								<button type="submit" id="submit" value="Submit" class="btn btn-danger w-150 btn-rounded">Collect Now</button>
								<span data-bookingUuid="{{ output.booking.uuid }}" id="NO_SHOW" class="btn btn-danger btn-rounded w-150 no-show">No Show</span>			
								{{#notequal output.booking.status 'CANCELLED'}}
								<span id="{{ output.booking.uuid }}" class="btn w-150 btn-rounded btn-danger booking-cancel">Cancel</span> 
								{{/notequal}} 
							</div>
						</div>
						</div>
						</form>
					{{/equal}} 

					{{#equal output.booking.status 'CHECK_IN'}}
						{{#equal depositData.depositCollected 0 }}
						<input type="hidden" value="{{ output.booking.referenceId }}" id="booking_referenceId" name="booking_referenceId">
						<div class="row row-sm m-md-b">
							<div class="col-md-12">
								<p><small class="text-uppercase fs-xs text-grey m-n">Deposit Collected</small></p>
								<div class="radio-inline p-n">
									<div class="radio-default danger">
										<input type="radio" class="deposit" id="deposit-yes" name="deposit" value="YES" {{#equal inputs.deposit 'Yes'}} checked="checked"
										{{/equal}}>
										<label for="deposit-yes">Yes</label>
									</div>
								</div>
								<div class="radio-inline p-n">
									<div class="radio-default danger">
										<input type="radio" class="deposit" id="deposit-no" name="deposit" value="NO" {{#equal inputs.deposit 'No'}} checked="checked"
										{{/equal}}>
										<label for="deposit-no">No</label>
									</div>
								</div>
							</div>
							<div class="col-md-12">
								<p><small class="text-uppercase fs-xs text-grey m-n">Payment type</small></p>
								<select name="payment_type" id="payment_type" class="form-control">
									<option value="">Select</option>
									<option value="CASH" {{#equal inputs.payment_type 'CASH'}} selected="selected" {{/equal}}>CASH</option>
									<option value="CREDIT_CARD" {{#equal inputs.payment_type 'CREDIT_CARD'}} selected="selected" {{/equal}}>CREDIT CARD</option>
									<option value="POS"  {{#equal inputs.payment_type 'POS'}} selected="selected" {{/equal}}>POS</option>
									<option value="BANK_TRANSFER"  {{#equal inputs.payment_type 'BANK_TRANSFER'}} selected="selected" {{/equal}}>BANK TRANSFER</option>
							
									</select>
							</div>
							<div class="row row-sm m-md-t m-md-b transaction_referrence_id">
								<div class="col-md-12">
									<label>Transaction Referrence ID*</label>
									<input type="text" class="form-control" name="transaction_referrence_id" id="transaction_referrence_id" value="{{ inputs.transaction_referrence_id }}">
								</div>
							</div>
						</div>
						{{/equal}}
						<div class="row row-sm m-md-b">
							<div class="col-md-12">
								<input type="hidden" id="depositamount" name="depositcollected" value="{{ depositData.depositAmount }}" class="form-control">
								<span data-bookingUuid="{{ output.booking.uuid }}" id="IN" class="btn btn-danger btn-rounded w-150 booking-action">CHECK-IN</span>
								<span data-bookingUuid="{{ output.booking.uuid }}" id="NO_SHOW" class="btn btn-danger btn-rounded w-150 no-show">No Show</span>		
								{{#notequal output.booking.status 'CANCELLED'}}
								<span id="{{ output.booking.uuid }}" class="btn btn-danger btn-danger btn-rounded w-150 booking-cancel">Cancel</span> 
								{{/notequal}}
							</div>
						</div>
					{{/equal}} 

					 
					{{#equal output.booking.status 'OCCUPIED'}}
					<form method="POST" action="" id="payment-checkout-form">
						<div class="row row-sm m-md-b">
							<label></label>
							<input type="hidden" id="bookinguuid" disabled="disabled" name="bookinguuid" value="{{ output.booking.uuid }}" class="form-control">
						</div>
						<div class="row row-sm m-md-b">
							<input type="hidden" id="depositamount" name="depositcollected" value="{{ depositData.depositCollected }}" class="form-control">
						</div>
						<div class="row row-sm m-md-b">
							<div class="col-md-12">
								<p><small class="text-uppercase fs-xs text-grey m-n">Loss & Damage Fee</small></p>
								<div class="radio-inline p-n">
									<div class="radio-default danger">
										<input type="radio" class="lossanddamage" id="lossanddamage-yes" name="lossanddamage" value="Yes">
										<label for="lossanddamage-yes">Yes</label>
									</div>
								</div>
								<div class="radio-inline p-n">
									<div class="radio-default danger">
										<input type="radio" class="lossanddamage" id="lossanddamage-no" name="lossanddamage" value="No">
										<label for="lossanddamage-no">No</label>
									</div>
								</div>
							</div>
						</div>
						<input type="hidden" value="{{ output.booking.referenceId }}" id="booking_referenceId" name="booking_referenceId">
						<div class="loss-damage-fee-block">
							<div class="row row-sm m-md-b">
								<label>Loss & Damage Fee</label>
								<input type="text" id="lossdamagefee" name="lossdamagefee" value="" class="form-control">
							</div>
							<div class="row row-sm m-md-b">
								<label>Loss & Damage Fee Need to collect</label>
								<input type="text" readonly="true" id="lossdamagefeecollected" name="lossdamagefeecolleted" value="" class="form-control">
							</div>
						</div>
						<div class="row row-sm m-md-b">
							<label>Deposit Refund</label>
							<input type="text" readonly="true" id="depositrefund" name="depositrefund" value="" class="form-control">
						</div>
						<span data-bookingUuid="{{ output.booking.uuid }}" id="OUT" class="btn btn-danger btn-rounded w-150 booking-action">CHECKOUT</span>
					</form>
					{{/equal}}
					
					{{#equal output.booking.status 'CHECK_OUT'}}
					<form method="POST" action="" id="payment-checkout-form">
						<div class="row row-sm m-md-b">
							<label></label>
							<input type="hidden" id="bookinguuid" disabled="disabled" name="bookinguuid" value="{{ output.booking.uuid }}" class="form-control">
						</div>
						<div class="row row-sm m-md-b">
							<input type="hidden" id="depositamount" name="depositcollected" value="{{ depositData.depositAmount }}" class="form-control">
						</div>
						<div class="row row-sm m-md-b">
							<div class="col-md-12">
								<p><small class="text-uppercase fs-xs text-grey m-n">Loss & Damage Fee</small></p>
								<div class="radio-inline p-n">
									<div class="radio-default danger">
										<input type="radio" class="lossanddamage" id="lossanddamage-yes" name="lossanddamage" value="Yes">
										<label for="lossanddamage-yes">Yes</label>
									</div>
								</div>
								<div class="radio-inline p-n">
									<div class="radio-default danger">
										<input type="radio" class="lossanddamage" id="lossanddamage-no" name="lossanddamage" value="No">
										<label for="lossanddamage-no">No</label>
									</div>
								</div>
							</div>
						</div>
						<input type="hidden" value="{{ output.booking.referenceId }}" id="booking_referenceId" name="booking_referenceId">
						<div class="loss-damage-fee-block">
							<div class="row row-sm m-md-b">
								<label>Loss & Damage Fee</label>
								<input type="text" id="lossdamagefee" name="lossdamagefee" value="" class="form-control">
							</div>
							<div class="row row-sm m-md-b">
								<label>Loss & Damage Fee Need to collect</label>
								<input type="text" readonly="true" id="lossdamagefeecollected" name="lossdamagefeecolleted" value="" class="form-control">
							</div>
						</div>
						<div class="row row-sm m-md-b">
							<label>Deposit Refund</label>
							<input type="text" readonly="true" id="depositrefund" name="depositrefund" value="" class="form-control">
						</div>
						<span data-bookingUuid="{{ output.booking.uuid }}" id="OUT" class="btn btn-danger btn-rounded w-150 booking-action">CHECKOUT</span>
					</form>
					{{/equal}}

				</div>
			</div>
		</div>
	</div>
</main>

<div id="booking-modification" class="modal fade modal-top" role="dialog">
	<div class="modal-dialog modal-sm">
		<div class="modal-content-container">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h5 class="text-uppercase fw-semi-thk text-black m-n">Booking Modification</h5>
				</div>
				<div class="modal-body p-xl-t">
					<form action="/pms/room-number-change" method="POST" id="booking-edit-form">
						<input type="text" name="modify_check_in" value="" id="modify_check_in" />
						<input type="text" name="modify_check_out" value="" id="modify_check_out" />
						<input type="hidden" name="hotel_id" id="hotel_id" value="{{ this.hotelUuid }}">
						<input type="hidden" name="room_reservation_uuid" value="{{ this.uuid }}" id="reservation_uuid">
						<input type="hidden" name="booking_uuid" value="{{ this.bookingUuid }}" id="booking_uuid">
						<button type="submit" value="Submit" class="btn btn-danger btn-block btn-rounded m-lg-t">Save</button>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="hidden-values">
	<input type="hidden" value="{{ output.booking.source }}" id="booking_source" name="booking_source">
</div>

{{> footer}}